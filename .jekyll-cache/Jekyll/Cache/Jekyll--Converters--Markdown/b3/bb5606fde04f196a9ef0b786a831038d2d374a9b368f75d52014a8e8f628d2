I"WÓ<p>è®¾è®¡æ¨¡å¼ï¼
<!--more--></p>
<h1 id="åˆ›å»ºå‹æ¨¡å¼">åˆ›å»ºå‹æ¨¡å¼</h1>

<h2 id="å•ä¾‹æ¨¡å¼">å•ä¾‹æ¨¡å¼</h2>

<p><img class="image image--xl" src="/assets/images/2021-08-12/image-20210730152523297.png" alt="image-20210730152523297.png" /></p>

<p>ä½¿ç”¨ç§æœ‰æ„é€ å‡½æ•°ã€ç§æœ‰é™æ€å˜é‡ä¸å…±æœ‰é™æ€æ–¹æ³•ã€‚</p>

<p>ç§æœ‰æ„é€ å‡½æ•°ä¿è¯Singletonä¸èƒ½è¢«å¤–éƒ¨å®ä¾‹åŒ–ï¼Œåªèƒ½é€šè¿‡å…±æœ‰é™æ€æ–¹æ³•æ¥è·å–å”¯ä¸€çš„é™æ€å˜é‡ã€‚</p>

<h3 id="æ‡’æ±‰å¼-çº¿ç¨‹ä¸å®‰å…¨">æ‡’æ±‰å¼-çº¿ç¨‹ä¸å®‰å…¨</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span><span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="nc">Singleton</span> <span class="n">uniqueInstance</span><span class="o">;</span>

  <span class="kd">private</span> <span class="nf">Singleton</span><span class="o">(){}</span>

  <span class="kd">public</span> <span class="nc">Singleton</span> <span class="nf">getUniqueInstance</span><span class="o">(){</span>
    <span class="k">if</span><span class="o">(</span><span class="n">uniqueInstance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
      <span class="n">uniqueInstance</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Singleton</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">uniqueInstance</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="é¥¿æ±‰å¼-çº¿ç¨‹å®‰å…¨">é¥¿æ±‰å¼-çº¿ç¨‹å®‰å…¨</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//çº¿ç¨‹ä¸å®‰å…¨é—®é¢˜ä¸»è¦æ˜¯ç”±äº uniqueInstance è¢«å®ä¾‹åŒ–å¤šæ¬¡ï¼Œé‡‡å–ç›´æ¥å®ä¾‹åŒ– uniqueInstance çš„æ–¹å¼å°±ä¸ä¼šäº§ç”Ÿçº¿ç¨‹ä¸å®‰å…¨é—®é¢˜ã€‚</span>
<span class="c1">//ä½†æ˜¯ç›´æ¥å®ä¾‹åŒ–çš„æ–¹å¼ä¹Ÿä¸¢å¤±äº†å»¶è¿Ÿå®ä¾‹åŒ–å¸¦æ¥çš„èŠ‚çº¦èµ„æºçš„å¥½å¤„ã€‚</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="nc">Singleton</span> <span class="n">uniqueInstance</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Singleton</span><span class="o">();</span>
</code></pre></div></div>

<h3 id="æ‡’æ±‰å¼-çº¿ç¨‹å®‰å…¨">æ‡’æ±‰å¼-çº¿ç¨‹å®‰å…¨</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//åªéœ€è¦å¯¹ getUniqueInstance() æ–¹æ³•åŠ é”ï¼Œé‚£ä¹ˆåœ¨ä¸€ä¸ªæ—¶é—´ç‚¹åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè¿›å…¥è¯¥æ–¹æ³•ï¼Œä»è€Œé¿å…äº†å®ä¾‹åŒ–å¤šæ¬¡ uniqueInstanceã€‚</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">synchronized</span> <span class="nc">Singleton</span> <span class="nf">getUniqueInstance</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">uniqueInstance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">uniqueInstance</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Singleton</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">uniqueInstance</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="åŒé‡æ ¡éªŒé”-çº¿ç¨‹å®‰å…¨">åŒé‡æ ¡éªŒé”-çº¿ç¨‹å®‰å…¨</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span>

  <span class="cm">/*
  ä¸º uniqueInstance åˆ†é…å†…å­˜ç©ºé—´
	åˆå§‹åŒ– uniqueInstance
	å°† uniqueInstance æŒ‡å‘åˆ†é…çš„å†…å­˜åœ°å€

	volatileç¦æ­¢æŒ‡ä»¤é‡æ’
  */</span>
    <span class="kd">private</span> <span class="kd">volatile</span> <span class="kd">static</span> <span class="nc">Singleton</span> <span class="n">uniqueInstance</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nf">Singleton</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>
	<span class="c1">//ä¸¤æ¬¡ifå¯ä»¥é˜²æ­¢ç­‰å¾…é”ï¼ŒåŠ é”ä¿è¯åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå®ä¾‹åŒ–</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Singleton</span> <span class="nf">getUniqueInstance</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">uniqueInstance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">synchronized</span> <span class="o">(</span><span class="nc">Singleton</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">uniqueInstance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">uniqueInstance</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Singleton</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">uniqueInstance</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="é™æ€å†…éƒ¨ç±»">é™æ€å†…éƒ¨ç±»</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
å½“ Singleton ç±»è¢«åŠ è½½æ—¶ï¼Œé™æ€å†…éƒ¨ç±» SingletonHolder æ²¡æœ‰è¢«åŠ è½½è¿›å†…å­˜ã€‚åªæœ‰å½“è°ƒç”¨ getUniqueInstance() æ–¹æ³•ä»è€Œè§¦å‘ SingletonHolder.INSTANCE æ—¶ SingletonHolder æ‰ä¼šè¢«åŠ è½½ï¼Œæ­¤æ—¶åˆå§‹åŒ– INSTANCE å®ä¾‹ï¼Œå¹¶ä¸” JVM èƒ½ç¡®ä¿ INSTANCE åªè¢«å®ä¾‹åŒ–ä¸€æ¬¡ã€‚
*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span><span class="o">{</span>
  <span class="kd">private</span> <span class="nf">Singleton</span><span class="o">(){}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nf">SingletonHolder</span><span class="o">(){</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Singleton</span> <span class="no">INSTANCE</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Singleton</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Singleton</span> <span class="nf">getUniqueInstance</span><span class="o">(){</span>
    <span class="k">return</span> <span class="nc">SingletonHolder</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="æšä¸¾">æšä¸¾</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
å¯ä»¥é˜²æ­¢åå°„æ”»å‡»
*/</span>
<span class="kd">public</span> <span class="nc">Enum</span> <span class="nc">Singleton</span><span class="o">{</span>

  <span class="no">INSTANCE</span><span class="o">;</span>

  <span class="kd">private</span> <span class="nc">String</span> <span class="n">objName</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getObjName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">objName</span><span class="o">;</span>
    <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setObjName</span><span class="o">(</span><span class="nc">String</span> <span class="n">objName</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">objName</span> <span class="o">=</span> <span class="n">objName</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="å·¥å‚æ¨¡å¼é™æ€å·¥å‚">å·¥å‚æ¨¡å¼ï¼ˆé™æ€å·¥å‚ï¼‰</h2>

<p>åœ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ä¸å‘å®¢æˆ·æš´éœ²å†…éƒ¨ç»†èŠ‚ï¼Œå¹¶æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„é€šç”¨æ¥å£ã€‚</p>

<p>ç®€å•å·¥å‚æŠŠ<strong>å®ä¾‹åŒ–çš„æ“ä½œå•ç‹¬æ”¾åˆ°ä¸€ä¸ªç±»</strong>ä¸­ï¼Œè¿™ä¸ªç±»å°±æˆä¸ºç®€å•å·¥å‚ç±»ï¼Œè®©ç®€å•å·¥å‚ç±»æ¥å†³å®šåº”è¯¥ç”¨å“ªä¸ªå…·ä½“å­ç±»æ¥å®ä¾‹åŒ–ã€‚</p>

<p><img class="image image--xl" src="/assets/images/2021-08-12/image-20210802101815264.png" alt="image-20210802101815264" /></p>

<h3 id="javatextdateformatä¸­çš„ç®€å•å·¥å‚æ¨¡å¼">java.text.DateFormatä¸­çš„ç®€å•å·¥å‚æ¨¡å¼</h3>

<p>DateFormatæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼ˆabstractï¼‰ï¼ŒgetDateInstanceæ–¹æ³•å°†å…·ä½“å­ç±»çš„å®ä¾‹åŒ–è¿‡ç¨‹éšè—èµ·æ¥äº†ï¼Œè°ƒç”¨è€…ä¸å¿…è€ƒè™‘å…·ä½“å­ç±»çš„å®ä¾‹åŒ–ï¼Œå› ä¸ºæŠ½è±¡ç±»ä¼šæä¾›å®ƒçš„åˆé€‚å­ç±»å®ä¾‹ã€‚</p>

<ol>
  <li>è¿ç”¨äº†å¤šæ€æ€§ï¼šç”±äºSimpleDateFormatæ˜¯DateFormatçš„å­ç±»ï¼Œè€ŒgetDateInstance()å£°æ˜çš„ç±»å‹ä¸ºDateFormatè€Œå®é™…è¿”å›ç±»å‹ä¸ºå­ç±»SimpleDateFormat</li>
  <li>ä½¿ç”¨äº†é™æ€å·¥å‚æ–¹æ³•ï¼ˆstaticï¼‰ï¼šç”±äºDateFormatæ˜¯æŠ½è±¡ç±»ä¸èƒ½è¿›è¡Œå®ä¾‹åŒ–ï¼Œå› æ­¤ä¹Ÿå°±ä¸èƒ½è°ƒç”¨å…¶ä¸­çš„æ™®é€šæ–¹æ³•ï¼ˆéé™æ€æ–¹æ³•ï¼‰ã€‚å› æ­¤æˆ‘ä»¬å¿…é¡»å°†å…¶å£°æ˜ä¸ºstatic,æ‰èƒ½è¿”å›å®ä¾‹</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="nc">DateFormat</span> <span class="nf">getDateInstance</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="k">return</span> <span class="nf">get</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="no">DEFAULT</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="nc">Locale</span><span class="o">.</span><span class="na">getDefault</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="nc">DateFormat</span> <span class="nf">getDateInstance</span><span class="o">(</span><span class="kt">int</span> <span class="n">style</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="k">return</span> <span class="nf">get</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">style</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="nc">Locale</span><span class="o">.</span><span class="na">getDefault</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="nc">DateFormat</span> <span class="nf">getDateInstance</span><span class="o">(</span><span class="kt">int</span> <span class="n">style</span><span class="o">,</span>
                                                 <span class="nc">Locale</span> <span class="n">aLocale</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="k">return</span> <span class="nf">get</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">style</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="n">aLocale</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">DateFormat</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">timeStyle</span><span class="o">,</span> <span class="kt">int</span> <span class="n">dateStyle</span><span class="o">,</span>
                                  <span class="kt">int</span> <span class="n">flags</span><span class="o">,</span> <span class="nc">Locale</span> <span class="n">loc</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">((</span><span class="n">flags</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">timeStyle</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">timeStyle</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"Illegal time style "</span> <span class="o">+</span> <span class="n">timeStyle</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">timeStyle</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">((</span><span class="n">flags</span> <span class="o">&amp;</span> <span class="mi">2</span><span class="o">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">dateStyle</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">dateStyle</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"Illegal date style "</span> <span class="o">+</span> <span class="n">dateStyle</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">dateStyle</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// Check whether a provider can provide an implementation that's closer</span>
            <span class="c1">// to the requested locale than what the Java runtime itself can provide.</span>
            <span class="nc">LocaleServiceProviderPool</span> <span class="n">pool</span> <span class="o">=</span>
                <span class="nc">LocaleServiceProviderPool</span><span class="o">.</span><span class="na">getPool</span><span class="o">(</span><span class="nc">DateFormatProvider</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">pool</span><span class="o">.</span><span class="na">hasProviders</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">DateFormat</span> <span class="n">providersInstance</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="na">getLocalizedObject</span><span class="o">(</span>
                                                    <span class="nc">DateFormatGetter</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">,</span>
                                                    <span class="n">loc</span><span class="o">,</span>
                                                    <span class="n">timeStyle</span><span class="o">,</span>
                                                    <span class="n">dateStyle</span><span class="o">,</span>
                                                    <span class="n">flags</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">providersInstance</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">return</span> <span class="n">providersInstance</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>

            <span class="k">return</span> <span class="k">new</span> <span class="nf">SimpleDateFormat</span><span class="o">(</span><span class="n">timeStyle</span><span class="o">,</span> <span class="n">dateStyle</span><span class="o">,</span> <span class="n">loc</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">MissingResourceException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">SimpleDateFormat</span><span class="o">(</span><span class="s">"M/d/yy h:mm a"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div></div>

<h3 id="æ€»ç»“">æ€»ç»“</h3>

<p>ä¼˜ç‚¹ï¼š</p>

<ul>
  <li>å°†åˆ›å»ºå®ä¾‹çš„å·¥ä½œä¸ä½¿ç”¨å®ä¾‹çš„å·¥ä½œåˆ†å¼€ï¼Œä½¿ç”¨è€…ä¸å¿…å…³å¿ƒç±»å¯¹è±¡å¦‚ä½•åˆ›å»ºï¼Œæ˜ç¡®äº†èŒè´£</li>
  <li>æŠŠåˆå§‹åŒ–å®ä¾‹æ—¶çš„å·¥ä½œæ”¾åˆ°å·¥å‚é‡Œè¿›è¡Œï¼Œä½¿ä»£ç æ›´å®¹æ˜“ç»´æŠ¤ã€‚æ›´ç¬¦åˆé¢å‘å¯¹è±¡çš„åŸåˆ™ï¼Œé¢å‘æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯é¢å‘å®ç°ç¼–ç¨‹</li>
</ul>

<p>ç¼ºç‚¹ï¼š</p>

<ul>
  <li>ç”±äºå·¥å‚ç±»é›†ä¸­äº†æ‰€æœ‰äº§å“åˆ›å»ºé€»è¾‘ï¼Œä¸€æ—¦ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œæ•´ä¸ªç³»ç»Ÿéƒ½è¦å—åˆ°å½±å“</li>
  <li>è¦æ–°å¢äº§å“ç±»çš„æ—¶å€™ï¼Œå°±è¦ä¿®æ”¹å·¥å‚ç±»çš„ä»£ç ï¼Œ<strong>è¿åäº†å¼€æ”¾å°é—­åŸåˆ™</strong>ï¼ˆå¯¹æ‰©å±•çš„å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹çš„å…³é—­ï¼‰</li>
  <li>ç®€å•å·¥å‚æ¨¡å¼ç”±äºä½¿ç”¨äº†é™æ€å·¥å‚æ–¹æ³•ï¼Œé€ æˆå·¥å‚è§’è‰²æ— æ³•å½¢æˆåŸºäºç»§æ‰¿çš„ç­‰çº§ç»“æ„ã€‚ï¼ˆå› ä¸ºé™æ€æ–¹æ³•å¯ä»¥è¢«ç»§æ‰¿ï¼Œä½†æ˜¯ä¸èƒ½é‡å†™ï¼Œæ— æ³•å®ç°å¤šæ€ï¼‰</li>
</ul>

<h2 id="å·¥å‚æ–¹æ³•æ¨¡å¼æ¥å£æŠ½è±¡">å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆæ¥å£/æŠ½è±¡ï¼‰</h2>

<p>å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œä½†ç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–å“ªä¸ªç±»ï¼Œå·¥å‚æ–¹æ³•æŠŠ<strong>å®ä¾‹åŒ–æ“ä½œæ¨è¿Ÿåˆ°å­ç±»</strong>ã€‚</p>

<p><img class="image image--xl" src="/assets/images/2021-08-12/image-20210802152737868.png" alt="image-20210802152737868" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//ç®€å•å·¥å‚æ¨¡å¼ä¸­çš„å·¥å‚ç±»</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Factory</span> <span class="o">{</span>
    <span class="kd">abstract</span> <span class="kd">public</span> <span class="nc">Product</span> <span class="nf">factoryMethod</span><span class="o">();</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doSomething</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Product</span> <span class="n">product</span> <span class="o">=</span> <span class="n">factoryMethod</span><span class="o">();</span>
        <span class="c1">// do something with the product</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConcreteFactory</span> <span class="kd">extends</span> <span class="nc">Factory</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nc">Product</span> <span class="nf">factoryMethod</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ConcreteProduct</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConcreteFactory1</span> <span class="kd">extends</span> <span class="nc">Factory</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nc">Product</span> <span class="nf">factoryMethod</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ConcreteProduct1</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConcreteFactory2</span> <span class="kd">extends</span> <span class="nc">Factory</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nc">Product</span> <span class="nf">factoryMethod</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ConcreteProduct2</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="æ€»ç»“-1">æ€»ç»“</h3>

<p>ä¼˜ç‚¹ï¼š</p>

<ul>
  <li>æ›´ç¬¦åˆå¼€-é—­åŸåˆ™ï¼šæ–°å¢ä¸€ç§äº§å“æ—¶ï¼Œåªéœ€è¦å¢åŠ ç›¸åº”çš„å…·ä½“äº§å“ç±»å’Œç›¸åº”çš„å·¥å‚å­ç±»å³å¯</li>
  <li>ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ï¼šæ¯ä¸ªå…·ä½“å·¥å‚ç±»åªè´Ÿè´£åˆ›å»ºå¯¹åº”çš„äº§å“</li>
  <li>ä¸ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•ï¼Œå¯ä»¥å½¢æˆåŸºäºç»§æ‰¿çš„ç­‰çº§ç»“æ„</li>
</ul>

<p>ç¼ºç‚¹ï¼š</p>

<ul>
  <li>æ·»åŠ æ–°äº§å“æ—¶ï¼Œé™¤äº†å¢åŠ æ–°äº§å“ç±»å¤–ï¼Œè¿˜è¦æä¾›ä¸ä¹‹å¯¹åº”çš„å…·ä½“å·¥å‚ç±»ï¼Œç³»ç»Ÿç±»çš„ä¸ªæ•°å°†æˆå¯¹å¢åŠ ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼›åŒæ—¶ï¼Œæœ‰æ›´å¤šçš„ç±»éœ€è¦ç¼–è¯‘å’Œè¿è¡Œï¼Œä¼šç»™ç³»ç»Ÿå¸¦æ¥ä¸€äº›é¢å¤–çš„å¼€é”€</li>
  <li>è™½ç„¶ä¿è¯äº†å·¥å‚æ–¹æ³•å†…çš„å¯¹ä¿®æ”¹å…³é—­ï¼Œä½†å¯¹äºä½¿ç”¨å·¥å‚æ–¹æ³•çš„ç±»ï¼Œå¦‚æœè¦æ›´æ¢å¦å¤–ä¸€ç§äº§å“ï¼Œä»ç„¶éœ€è¦ä¿®æ”¹å®ä¾‹åŒ–çš„å…·ä½“å·¥å‚ç±»</li>
  <li>ä¸€ä¸ªå…·ä½“å·¥å‚åªèƒ½åˆ›å»ºä¸€ç§å…·ä½“äº§å“</li>
</ul>

<h2 id="æŠ½è±¡å·¥å‚æ¨¡å¼æŠ½è±¡æ¥å£">æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆæŠ½è±¡/æ¥å£ï¼‰</h2>

<p>æŠ½è±¡å·¥å‚æ¨¡å¼åˆ›å»ºçš„æ˜¯<strong>å¯¹è±¡å®¶æ—</strong>ï¼Œä¹Ÿå°±æ˜¯<strong>å¾ˆå¤šå¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡</strong>ï¼Œå¹¶ä¸”è¿™äº›<strong>å¯¹è±¡æ˜¯ç›¸å…³çš„</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´å¿…é¡»ä¸€èµ·åˆ›å»ºå‡ºæ¥ã€‚å·¥å‚æ–¹æ³•æ¨¡å¼åªæ˜¯ç”¨äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚</p>

<blockquote>
  <p>æŠ½è±¡å·¥å‚æ¨¡å¼ä¹Ÿå°±æ˜¯å°†å·¥å‚è¿›è¡ŒæŠ½è±¡ï¼Œç”¨æˆ·å¯ä»¥é’ˆå¯¹å·¥å‚çš„å¤šæ€æ¥åˆ›å»ºå‡ºäº§å“æ—ï¼ˆäº§å“ä¸åŒï¼Œä½†æ˜¯æœ‰ç›¸åŒç‚¹ï¼‰ã€‚</p>

  <p>åœ¨å¯¹äº§å“å’Œå·¥å‚çš„æŠ½è±¡æ—¶æœ‰ç”¨åˆ°å·¥å‚æ–¹æ³•æ¨¡å¼ã€‚</p>
</blockquote>

<p><img class="image image--xl" src="/assets/images/2021-08-12/image-20210802160732919.png" alt="image-20210802160732919" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//åŸæ–™æ¥å£â€”â€”é¢å›¢</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Dough</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">doughType</span><span class="o">();</span>
<span class="o">}</span>
<span class="c1">//åŸæ–™æ¥å£â€”â€”é…±æ±</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Sauce</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">sauceType</span><span class="o">();</span>
<span class="o">}</span>

<span class="c1">//åŸæ–™æ¥å£å…·ä½“å®ç°</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BigDough</span> <span class="kd">implements</span> <span class="nc">Dough</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">doughType</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"å¤§é¢å›¢"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SmallDough</span> <span class="kd">implements</span> <span class="nc">Dough</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">doughType</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"å°é¢å›¢"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TomatoSauce</span> <span class="kd">implements</span> <span class="nc">Sauce</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">sauceType</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"ç•ªèŒ„é…±"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PotatoSauce</span> <span class="kd">implements</span> <span class="nc">Sauce</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">sauceType</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"åœŸè±†é…±"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="c1">//æŠ½è±¡å·¥å‚</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">IngredientFactory</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="nc">Dough</span> <span class="nf">createDough</span><span class="o">();</span>

    <span class="kd">public</span> <span class="nc">Sauce</span> <span class="nf">createSauce</span><span class="o">();</span>
<span class="o">}</span>

<span class="c1">//æŠ½è±¡å·¥å‚å®ç°â€”â€”LA</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LAFactory</span> <span class="kd">implements</span> <span class="nc">IngredientFactory</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Dough</span> <span class="nf">createDough</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">SmallDough</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Sauce</span> <span class="nf">createSauce</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">TomatoSauce</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">//æŠ½è±¡å·¥å‚â€”â€”NewYork</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NewYorkFactory</span> <span class="kd">implements</span> <span class="nc">IngredientFactory</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Dough</span> <span class="nf">createDough</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">BigDough</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Sauce</span> <span class="nf">createSauce</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">PotatoSauce</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//å…·ä½“å·¥å‚å®ç°</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LAStore</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">IngredientFactory</span> <span class="n">factory</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">LAStore</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">factory</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LAFactory</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">make</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Dough</span> <span class="n">dough</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="na">createDough</span><span class="o">();</span>
        <span class="nc">Sauce</span> <span class="n">sauce</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="na">createSauce</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">dough</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sauce</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NewYorkStore</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">IngredientFactory</span> <span class="n">ingredientFactory</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">NewYorkStore</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">ingredientFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">NewYorkFactory</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">make</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Dough</span> <span class="n">dough</span> <span class="o">=</span> <span class="n">ingredientFactory</span><span class="o">.</span><span class="na">createDough</span><span class="o">();</span>
        <span class="nc">Sauce</span> <span class="n">sauce</span> <span class="o">=</span> <span class="n">ingredientFactory</span><span class="o">.</span><span class="na">createSauce</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">dough</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sauce</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h3 id="æ€»ç»“-2">æ€»ç»“</h3>

<p>ä¼˜ç‚¹ï¼š</p>

<ul>
  <li>æŠ½è±¡å·¥å‚æ¨¡å¼éš”ç¦»äº†å…·ä½“ç±»çš„ç”Ÿäº§ï¼Œä½¿å¾—å®¢æˆ·å¹¶ä¸éœ€è¦çŸ¥é“ä»€ä¹ˆè¢«åˆ›å»ºã€‚</li>
  <li>å½“ä¸€ä¸ªäº§å“æ—ä¸­çš„å¤šä¸ªå¯¹è±¡è¢«è®¾è®¡æˆä¸€èµ·å·¥ä½œæ—¶ï¼Œå®ƒèƒ½ä¿è¯å®¢æˆ·ç«¯å§‹ç»ˆåªä½¿ç”¨åŒä¸€ä¸ªäº§å“æ—ä¸­çš„å¯¹è±¡ã€‚</li>
  <li>å¢åŠ æ–°çš„å…·ä½“å·¥å‚å’Œäº§å“æ—å¾ˆæ–¹ä¾¿ï¼Œæ— é¡»ä¿®æ”¹å·²æœ‰ç³»ç»Ÿï¼Œç¬¦åˆâ€œå¼€é—­åŸåˆ™â€ã€‚</li>
</ul>

<p>ç¼ºç‚¹ï¼š</p>

<ul>
  <li>å¢åŠ æ–°çš„äº§å“ç­‰çº§ç»“æ„å¾ˆå¤æ‚ï¼Œéœ€è¦ä¿®æ”¹æŠ½è±¡å·¥å‚å’Œæ‰€æœ‰çš„å…·ä½“å·¥å‚ç±»ï¼Œå¯¹â€œå¼€é—­åŸåˆ™â€çš„æ”¯æŒå‘ˆç°å€¾æ–œæ€§ã€‚</li>
</ul>

<h3 id="ä½¿ç”¨åœºæ™¯">ä½¿ç”¨åœºæ™¯</h3>

<ul>
  <li>å½“ç³»ç»Ÿæ‰€æä¾›çš„å·¥å‚æ‰€éœ€ç”Ÿäº§çš„å…·ä½“äº§å“å¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„å¯¹è±¡ï¼Œè€Œæ˜¯å¤šä¸ªä½äºä¸åŒäº§å“ç­‰çº§ç»“æ„ä¸­å±äºä¸åŒç±»å‹çš„å…·ä½“äº§å“æ—¶éœ€è¦ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚</li>
  <li>ç³»ç»Ÿä¸­æœ‰å¤šäºä¸€ä¸ªçš„äº§å“æ—ï¼Œè€Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­æŸä¸€äº§å“æ—ã€‚</li>
  <li>ç³»ç»Ÿæä¾›ä¸€ä¸ªäº§å“ç±»çš„åº“ï¼Œæ‰€æœ‰çš„äº§å“ä»¥åŒæ ·çš„æ¥å£å‡ºç°ï¼Œä»è€Œä½¿å®¢æˆ·ç«¯ä¸ä¾èµ–äºå…·ä½“å®ç°ã€‚</li>
</ul>

<h2 id="ç”Ÿæˆå™¨æ¨¡å¼">ç”Ÿæˆå™¨æ¨¡å¼</h2>

<p>å°è£…ä¸€ä¸ªå¯¹è±¡çš„æ„é€ è¿‡ç¨‹ï¼Œå¹¶å…è®¸æŒ‰æ­¥éª¤æ„é€ ï¼Œä¾‹å¦‚StringBuilderã€StringBufferéƒ½æ˜¯ç»§æ‰¿äº†AbstractStringBuilderç±»</p>

<p><img class="image image--xl" src="/assets/images/2021-08-12/image-20210802173101196.png" alt="image-20210802173101196" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//é”®ç›˜å®ä½“ç±»</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Keyboard</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">pcb</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">positioningPlate</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">mat</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Keyboard</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPcb</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">pcb</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPcb</span><span class="o">(</span><span class="nc">String</span> <span class="n">pcb</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">pcb</span> <span class="o">=</span> <span class="n">pcb</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPositioningPlate</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">positioningPlate</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPositioningPlate</span><span class="o">(</span><span class="nc">String</span> <span class="n">positioningPlate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">positioningPlate</span> <span class="o">=</span> <span class="n">positioningPlate</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getMat</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">mat</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setMat</span><span class="o">(</span><span class="nc">String</span> <span class="n">mat</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">mat</span> <span class="o">=</span> <span class="n">mat</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"Keyboard{"</span> <span class="o">+</span>
                <span class="s">"pcb='"</span> <span class="o">+</span> <span class="n">pcb</span> <span class="o">+</span> <span class="sc">'\''</span> <span class="o">+</span>
                <span class="s">", positioningPlate='"</span> <span class="o">+</span> <span class="n">positioningPlate</span> <span class="o">+</span> <span class="sc">'\''</span> <span class="o">+</span>
                <span class="s">", mat='"</span> <span class="o">+</span> <span class="n">mat</span> <span class="o">+</span> <span class="sc">'\''</span> <span class="o">+</span>
                <span class="sc">'}'</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="c1">//æ„å»ºè€…ï¼ˆBuilderï¼‰</span>
<span class="kd">public</span>  <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">KeyboardBuilder</span> <span class="o">{</span>

    <span class="kd">abstract</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createPcb</span><span class="o">();</span>

    <span class="kd">abstract</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createPositioningPlate</span><span class="o">();</span>

    <span class="kd">abstract</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createMat</span><span class="o">();</span>

    <span class="kd">abstract</span> <span class="kd">public</span> <span class="nc">Keyboard</span> <span class="nf">getKeyboard</span><span class="o">();</span>

<span class="o">}</span>

<span class="c1">//å…·ä½“æ„å»ºè€…ï¼ˆKBDï¼‰</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">KBDKeyboardBuilder</span> <span class="kd">extends</span> <span class="nc">KeyboardBuilder</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">Keyboard</span> <span class="n">keyboard</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">KBDKeyboardBuilder</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">keyboard</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Keyboard</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createPcb</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">keyboard</span><span class="o">.</span><span class="na">setPcb</span><span class="o">(</span><span class="s">"çƒ­æ’æ‹”PCB"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createPositioningPlate</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">keyboard</span><span class="o">.</span><span class="na">setPositioningPlate</span><span class="o">(</span><span class="s">"FR4å®šä½æ¿"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createMat</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">keyboard</span><span class="o">.</span><span class="na">setMat</span><span class="o">(</span><span class="s">"ç¡…èƒ¶å«"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Keyboard</span> <span class="nf">getKeyboard</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">keyboard</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//å…·ä½“æ„å»ºè€…ï¼ˆSamï¼‰</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SamKeyboardBuilder</span> <span class="kd">extends</span> <span class="nc">KeyboardBuilder</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">Keyboard</span> <span class="n">keyboard</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">SamKeyboardBuilder</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">keyboard</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Keyboard</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createPcb</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">keyboard</span><span class="o">.</span><span class="na">setPcb</span><span class="o">(</span><span class="s">"ç„Šæ¥PCB"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createPositioningPlate</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">keyboard</span><span class="o">.</span><span class="na">setPositioningPlate</span><span class="o">(</span><span class="s">"é»„é“œå®šä½æ¿"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createMat</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">keyboard</span><span class="o">.</span><span class="na">setMat</span><span class="o">(</span><span class="s">"è½´ä¸‹å«"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Keyboard</span> <span class="nf">getKeyboard</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">keyboard</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="c1">//å¯¼æ¼”ï¼ˆDirectorï¼‰</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">KeyboardDirector</span> <span class="o">{</span>


    <span class="kd">public</span> <span class="nf">KeyboardDirector</span><span class="o">(</span><span class="nc">KeyboardBuilder</span> <span class="n">keyboardBuilder</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">keyboardBuilder</span><span class="o">.</span><span class="na">createPcb</span><span class="o">();</span>
        <span class="n">keyboardBuilder</span><span class="o">.</span><span class="na">createPositioningPlate</span><span class="o">();</span>
        <span class="n">keyboardBuilder</span><span class="o">.</span><span class="na">createMat</span><span class="o">();</span>
    <span class="o">}</span>

<span class="c1">//æµ‹è¯•</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">KBDKeyboardBuilder</span> <span class="n">kbdKeyboardBuilder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">KBDKeyboardBuilder</span><span class="o">();</span>
        <span class="nc">SamKeyboardBuilder</span> <span class="n">samKeyboardBuilder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SamKeyboardBuilder</span><span class="o">();</span>

        <span class="nc">KeyboardDirector</span> <span class="n">director</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">KeyboardDirector</span><span class="o">(</span><span class="n">kbdKeyboardBuilder</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">kbdKeyboardBuilder</span><span class="o">.</span><span class="na">getKeyboard</span><span class="o">());</span>
        <span class="n">director</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">KeyboardDirector</span><span class="o">(</span><span class="n">samKeyboardBuilder</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">samKeyboardBuilder</span><span class="o">.</span><span class="na">getKeyboard</span><span class="o">());</span>

    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<p><img class="image image--xl" src="/assets/images/2021-08-12/image-20210803102906369.png" alt="image-20210803102906369" /></p>

<h3 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h3>

<p>1ã€ ç”Ÿæˆå™¨æ¨¡å¼çš„ä½¿ç”¨ä½¿å¾—äº§å“çš„å†…éƒ¨è¡¨è±¡å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–ã€‚ä½¿ç”¨ç”Ÿæˆå™¨æ¨¡å¼å¯ä»¥ä½¿å®¢æˆ·ç«¯ä¸å¿…çŸ¥é“äº§å“å†…éƒ¨ç»„æˆçš„ç»†èŠ‚ã€‚
2ã€ æ¯ä¸ªç‰¹å®šçš„ç”Ÿæˆå™¨éƒ½ç‹¬ç«‹äºå…¶å®ƒç”Ÿæˆå™¨å’Œç¨‹åºçš„å…¶ä½™éƒ¨åˆ†ï¼Œè¿™æé«˜æ‹‰æ¨¡å—åŒ–ç¨‹åº¦ï¼Œå¹¶ä½¿å¾—æ·»åŠ å…¶ç”Ÿæˆå™¨å˜çš„çµæ´»ç®€å•ã€‚
3ã€ å› ä¸ºæ¯ä¸€ä¸ªç”Ÿæˆå™¨éƒ½æ˜¯æ ¹æ®æ•°æ®æ¥é€æ­¥æ„é€ å‡ºæœ€ç»ˆçš„äº§å“çš„ï¼Œå› æ­¤å¯¹ç”Ÿæˆå™¨æ„é€ çš„æ¯ä¸ªæœ€ç»ˆäº§å“ä»å¤´åˆ°å°¾æœ‰æ›´å¥½çš„æ§åˆ¶èƒ½åŠ›ã€‚</p>

<h3 id="ä½¿ç”¨åœºæ™¯-1">ä½¿ç”¨åœºæ™¯</h3>

<p>1ã€ äº§å“å¯¹è±¡çš„å†…éƒ¨ç»“æ„éœ€è¦æœ‰ä¸åŒçš„å±•ç¤ºã€‚
2ã€ ä¸åŒçš„å±•ç¤ºå¯¹è±¡å±æ€§ä¾èµ–ä¸åŒä¸€ä¸ªäº§å“å¯¹è±¡ï¼Œäº§å“å¯¹è±¡å†…éƒ¨é¡ºåºå¯è‡ªè¡Œè°ƒæ•´ä½¿ç”¨ã€‚
3ã€ åœ¨å¯¹è±¡åˆ›å»ºè¿‡ç¨‹ä¸­ä¼šä½¿ç”¨åˆ°ç³»ç»Ÿä¸­çš„ä¸€äº›å…¶å®ƒå¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡åœ¨äº§å“å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ä¸­ä¸æ˜“å¾—åˆ°ã€‚</p>

<h2 id="åŸå‹æ¨¡å¼æ·±æ‹·è´">åŸå‹æ¨¡å¼ï¼ˆæ·±æ‹·è´ï¼‰</h2>

<p>ä½¿ç”¨åŸå‹å®ä¾‹æŒ‡å®šè¦åˆ›å»ºå¯¹è±¡çš„ç±»å‹ï¼Œé€šè¿‡å¤åˆ¶è¿™ä¸ªåŸå‹æ¥åˆ›å»ºæ–°å¯¹è±¡ã€‚åŸå‹æ¨¡å¼ç”¨äºåˆ›å»ºé‡å¤çš„å¯¹è±¡ï¼ˆæˆ–è€…ä¸å®Œå…¨é‡å¤çš„å¯¹è±¡ï¼‰ï¼Œå®ç°å¯¹è±¡çš„æ‹·è´ã€‚</p>

<p>æ¯”å¦‚ï¼šå¦‚æœä¸€ä¸ªå¯¹è±¡çš„æ•°æ®éœ€è¦ç»è¿‡è¾ƒé«˜ä»£ä»·çš„æ•°æ®åº“æ“ä½œï¼Œé‡‡ç”¨åŸå‹æ¨¡å¼èƒ½å¤Ÿè¾ƒå¥½çš„ç¼“å­˜å½“å‰å¯¹è±¡ï¼Œå‡å°‘æ•°æ®åº“çš„è®¿é—®é‡ã€‚</p>

<p><img class="image image--xl" src="/assets/images/2021-08-12/image-20210803103638252.png" alt="image-20210803103638252" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//åŸå‹</span>
<span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Prototype</span> <span class="o">{</span>

    <span class="kd">abstract</span> <span class="nc">Prototype</span> <span class="nf">cloneNew</span><span class="o">();</span>
<span class="o">}</span>


<span class="c1">//å…·ä½“åŸå‹</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Phone</span> <span class="kd">extends</span> <span class="nc">Prototype</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">color</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"{"</span> <span class="o">+</span>
                <span class="s">"name='"</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="sc">'\''</span> <span class="o">+</span>
                <span class="s">", color='"</span> <span class="o">+</span> <span class="n">color</span> <span class="o">+</span> <span class="sc">'\''</span> <span class="o">+</span>
                <span class="sc">'}'</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getColor</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">color</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setColor</span><span class="o">(</span><span class="nc">String</span> <span class="n">color</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">color</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="nc">Phone</span> <span class="nf">cloneNew</span><span class="o">()</span> <span class="o">{</span>

        <span class="nc">Phone</span> <span class="n">phone</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="n">phone</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Phone</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">phone</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">phone</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">color</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">phone</span><span class="o">;</span>
    <span class="o">}</span>

<span class="c1">//æµ‹è¯•</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Phone</span> <span class="n">phone</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Phone</span><span class="o">();</span>
        <span class="n">phone</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="s">"é»‘è‰²"</span><span class="o">);</span>
        <span class="n">phone</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"è£è€€"</span><span class="o">);</span>
        <span class="nc">Phone</span> <span class="n">clonePhone</span> <span class="o">=</span> <span class="n">phone</span><span class="o">.</span><span class="na">cloneNew</span><span class="o">();</span>
      <span class="c1">//æ‹·è´åè¿›è¡Œä¿®æ”¹</span>
        <span class="n">clonePhone</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"åä¸º"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"phone:"</span><span class="o">+</span><span class="n">phone</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"clonePhone:"</span><span class="o">+</span><span class="n">clonePhone</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><img class="image image--xl" src="/assets/images/2021-08-12/image-20210803113104044.png" alt="image-20210803113104044" /></p>

<h3 id="æ€»ç»“-3">æ€»ç»“</h3>

<p>ä¼˜ç‚¹ï¼š</p>

<ol>
  <li>å¿«é€Ÿåˆ›å»ºå¤æ‚å¯¹è±¡å®ä¾‹</li>
  <li>é€ƒé¿æ„é€ å‡½æ•°çº¦æŸ</li>
</ol>

<p>ç¼ºç‚¹ï¼š</p>

<ol>
  <li>å¼•ç”¨å«æœ‰å¾ªç¯å¼•ç”¨å¦‚ä½•å¤„ç†</li>
  <li>å¿…é¡»å®ç°Cloneableæ¥å£</li>
</ol>
:ET